# letsTrade

LS증권 Open API를 활용한 주식 자동매매 프로그램

## 개요

letsTrade는 LS증권의 Open API를 활용하여 주식 자동매매를 수행하는 프로그램입니다.
웹 대시보드를 통해 실시간 모니터링이 가능하며, Telegram을 통해 알림을 받을 수 있습니다.

## 기능

- **주식 시세 조회**: 현재가, 호가, 체결 내역 조회
- **계좌 관리**: 잔고 조회, 예수금 조회
- **주식 주문**: 매수/매도 주문, 주문 정정/취소
- **자동매매 전략**: MA Crossover, RSI, 볼린저 밴드 등
- **리스크 관리**: 손절/익절 자동화, 포지션 사이징
- **웹 대시보드**: 실시간 포트폴리오 모니터링
- **알림**: Telegram을 통한 체결/시그널 알림

## 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                        로컬 자동매매 봇                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐  │
│  │ LS증권 API   │  │   SQLite     │  │   매매 전략 엔진      │  │
│  │  연동 모듈   │──│  (실시간)    │──│  (시그널 생성)       │  │
│  └──────────────┘  └──────────────┘  └──────────────────────┘  │
└───────────────────────────┬─────────────────────────────────────┘
                            │ 동기화
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                        Supabase Cloud                           │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────┐  │
│  │ PostgreSQL   │  │  Realtime    │  │   Edge Functions     │  │
│  │ (영구 저장)  │  │  (구독)      │  │   (알림 발송)        │  │
│  └──────────────┘  └──────────────┘  └──────────────────────┘  │
└───────────────────────────┬─────────────────────────────────────┘
                            │
          ┌─────────────────┼─────────────────┐
          ▼                 ▼                 ▼
┌──────────────┐  ┌──────────────────┐  ┌──────────────┐
│ 웹 대시보드   │  │  Telegram 알림   │  │  모바일 접근  │
│   (Vercel)   │  │                  │  │              │
└──────────────┘  └──────────────────┘  └──────────────┘
```

## 기술 스택

### 백엔드 (자동매매 봇)
- Python 3.10+
- SQLite + SQLAlchemy (로컬 캐시)
- Supabase (클라우드 저장소)
- APScheduler (스케줄링)
- Typer (CLI)

### 프론트엔드 (대시보드)
- Next.js 14
- shadcn/ui + Tailwind CSS
- Recharts (차트)
- Supabase Realtime

### 인프라
- Vercel (대시보드 배포)
- Supabase (DB, Auth, Realtime)
- Telegram Bot API (알림)

## 설치

### 요구사항
- Python 3.10 이상
- Node.js 18 이상 (대시보드)
- LS증권 계좌 및 Open API 신청

### 봇 설치

```bash
cd bot
pip install -e ".[dev]"
```

### 환경 변수 설정

```bash
cp .env.example .env
# .env 파일을 열어 필요한 값을 입력
```

### 실행

```bash
# CLI 실행
lets-trade --help

# 시세 조회
lets-trade quote 005930

# 잔고 조회
lets-trade balance
```

## 개발

### 테스트 실행

```bash
cd bot
pytest
```

### 코드 품질 검사

```bash
ruff check .
mypy .
```

## 라이선스

MIT License

## 참고 링크

- [LS증권 Open API 공식 문서](https://openapi.ls-sec.co.kr/)
- [LS증권 OpenAPI 샘플 (GitHub)](https://github.com/teranum/ls-openapi-samples)
- [Supabase 공식 문서](https://supabase.com/docs)
